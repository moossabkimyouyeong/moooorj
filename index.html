<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Xx LIFE-QUEST xX</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ------------------------------------------------------------------
    CLAUDE ARTIFACT 스타일 기반 전체 UI
------------------------------------------------------------------ */
* {
  box-sizing: border-box;
  font-family: 'Pretendard', sans-serif;
}
body {
  margin: 0;
  background: linear-gradient(135deg, #1b1b1e, #2a2a31);
  color: #fff;
}

/* 공통 카드 스타일 */
.card {
  background: rgba(255,255,255,0.08);
  border: 1px solid rgba(255,255,255,0.15);
  padding: 18px;
  border-radius: 14px;
  margin-bottom: 16px;
  backdrop-filter: blur(10px);
  animation: fadeIn .3s ease;
}

button {
  width: 100%;
  padding: 14px;
  margin-top: 8px;
  border-radius: 10px;
  border: 1px solid #a970ff;
  background: rgba(169,112,255,0.15);
  color: #fff;
  font-weight: 600;
  transition: .2s;
}
button:hover {
  background: rgba(169,112,255,0.35);
  transform: translateY(-2px);
}

/* 화면 섹션 SPA 숨김 처리 */
.section { display: none; padding: 20px; }
.active { display: block; animation: fadeIn .3s ease; }

/* 페이드 애니메이션 */
@keyframes fadeIn {
  from { opacity: 0; transform: translateY(6px);}
  to { opacity: 1; transform: translateY(0); }
}

/* 토글 스위치 */
.toggle {
  position: relative;
  width: 46px; height: 24px;
}
.toggle input { display:none; }
.slider {
  position: absolute;
  cursor: pointer;
  background: #777;
  border-radius: 24px;
  top:0; left:0; right:0; bottom:0;
  transition:.3s;
}
.slider:before {
  position:absolute;
  content:"";
  width:20px; height:20px;
  left:2px; top:2px;
  background:white;
  border-radius:50%;
  transition:.3s;
}
input:checked + .slider {
  background:#a970ff;
}
input:checked + .slider:before {
  transform: translateX(22px);
}

/* 모달 */
.modal-bg {
  display:none;
  position:fixed; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.5);
  backdrop-filter: blur(3px);
  justify-content:center; align-items:center;
}
.modal {
  width:90%;
  background:#2d2d33;
  padding:20px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,0.1);
}

/* 인벤토리 아이템 */
.inv-item {
  padding:12px;
  background:rgba(255,255,255,0.05);
  border-radius:10px;
  margin-bottom:10px;
  border:1px solid rgba(255,255,255,0.1);
}
</style>
</head>
<body>

<!-- -------------------------------------------------------------
   1. 로그인 화면
-------------------------------------------------------------- -->
<section id="login" class="section active">
  <h2>Xx LIFE-QUEST xX</h2>
  <div class="card">
    <p>사용자명을 입력하여 시작하세요</p>
    <input id="loginName" placeholder="닉네임" style="width:100%;padding:12px;border-radius:10px;border:none;">
    <button onclick="login()">로그인</button>
  </div>
</section>

<!-- -------------------------------------------------------------
   2. 대시보드
-------------------------------------------------------------- -->
<section id="dashboard" class="section">
  <h2>대시보드</h2>

  <div class="card">
    <p><b>레벨:</b> <span id="lv"></span></p>
    <p><b>경험치:</b> <span id="exp"></span> / <span id="expNeed"></span></p>
    <p><b>코인:</b> <span id="coins"></span></p>
    <p><b>장착 장비:</b> <span id="equip"></span></p>
    <p><b>활성 스킬:</b> <span id="activeSkills"></span></p>
  </div>

  <div class="card">
    <button onclick="showSection('quest')">퀘스트</button>
    <button onclick="showSection('shop')">상점</button>
    <button onclick="showSection('gacha')">뽑기</button>
    <button onclick="showSection('skills')">스킬</button>
    <button onclick="showSection('inventory')">인벤토리</button>
    <button onclick="showSection('settings')">설정</button>
  </div>
</section>

<!-- -------------------------------------------------------------
   3. 퀘스트
-------------------------------------------------------------- -->
<section id="quest" class="section">
  <h2>퀘스트</h2>
  <button onclick="openQuestModal()">+ 퀘스트 추가</button>

  <div id="questList" style="margin-top:18px;"></div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>

<!-- 퀘스트 모달 -->
<div id="questModal" class="modal-bg">
  <div class="modal">
    <h3>퀘스트 추가</h3>
    <input id="qName" placeholder="퀘스트명" style="width:100%;padding:12px;border-radius:10px;">
    <select id="qDiff" style="width:100%;padding:12px;margin-top:10px;border-radius:10px;">
      <option value="1">★1 EASY</option>
      <option value="2">★2 NORMAL</option>
      <option value="3">★3 HARD</option>
    </select>
    <button onclick="addQuest()">추가</button>
    <button onclick="closeQuestModal()">취소</button>
  </div>
</div>

<!-- -------------------------------------------------------------
   4. 상점
-------------------------------------------------------------- -->
<section id="shop" class="section">
  <h2>상점</h2>

  <div class="card">
    <p>게임 시간 +30분 — 25코인</p>
    <button onclick="buyItem('time30',25)">구매</button>
  </div>
  <div class="card">
    <p>게임 시간 +1시간 — 60코인</p>
    <button onclick="buyItem('time60',60)">구매</button>
  </div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>

<!-- -------------------------------------------------------------
   5. 뽑기
-------------------------------------------------------------- -->
<section id="gacha" class="section">
  <h2>장비 뽑기 (20코인)</h2>
  <button onclick="rollGacha()">뽑기!</button>

  <div id="gachaResult" class="card" style="margin-top:20px;"></div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>

<!-- -------------------------------------------------------------
   6. 스킬
-------------------------------------------------------------- -->
<section id="skills" class="section">
  <h2>스킬</h2>

  <div class="card">
    <p>보상 2배</p>
    <label class="toggle"><input id="sk_reward" type="checkbox" onchange="toggleSkill('reward2')"><span class="slider"></span></label>
  </div>

  <div class="card">
    <p>뽑기 운 2배</p>
    <label class="toggle"><input id="sk_luck" type="checkbox" onchange="toggleSkill('luck2')"><span class="slider"></span></label>
  </div>

  <div class="card">
    <p>경험치 부스터 +20%</p>
    <label class="toggle"><input id="sk_exp" type="checkbox" onchange="toggleSkill('exp20')"><span class="slider"></span></label>
  </div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>

<!-- -------------------------------------------------------------
   7. 인벤토리
-------------------------------------------------------------- -->
<section id="inventory" class="section">
  <h2>인벤토리</h2>

  <div id="invList"></div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>

<!-- -------------------------------------------------------------
   8. 설정
-------------------------------------------------------------- -->
<section id="settings" class="section">
  <h2>설정</h2>

  <div class="card">
    <button style="background:#ff3b3b;border-color:#ff6b6b;" onclick="resetData()">현재 사용자 데이터 초기화</button>
  </div>

  <button onclick="showSection('dashboard')">← 뒤로</button>
</section>



<script>
/* ===============================================================
    LIFE-QUEST 핵심 데이터
================================================================ */
let user = "";
let data = {};

/* 로컬스토리지 KEY */
const KEY = (u)=> `LIFEQUEST_${u}`;

/* ---------------------------------------------------------------
   0. 화면 전환
--------------------------------------------------------------- */
function showSection(id){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  if(id === "dashboard") renderDashboard();
  if(id === "quest") renderQuest();
  if(id === "inventory") renderInventory();
  if(id === "skills") renderSkills();
}

/* ---------------------------------------------------------------
   1. 로그인
--------------------------------------------------------------- */
function login(){
  const name = document.getElementById("loginName").value.trim();
  if(!name) return alert("사용자명을 입력하세요");
  user = name;

  const saved = localStorage.getItem(KEY(user));
  if(saved){
    data = JSON.parse(saved);
  } else {
    data = {
      lv:1, exp:0, expNeed:100,
      coins:0,
      equip:"",
      skills:{reward2:false,luck2:false,exp20:false},
      quests:[],
      inventory:[]
    };
    save();
  }
  showSection("dashboard");
}

/* ---------------------------------------------------------------
   저장
--------------------------------------------------------------- */
function save(){
  localStorage.setItem(KEY(user), JSON.stringify(data));
}

/* ---------------------------------------------------------------
   2. 대시보드 출력
--------------------------------------------------------------- */
function renderDashboard(){
  document.getElementById("lv").innerText = data.lv;
  document.getElementById("exp").innerText = data.exp;
  document.getElementById("expNeed").innerText = data.expNeed;
  document.getElementById("coins").innerText = data.coins;
  document.getElementById("equip").innerText = data.equip || "무기 없음";

  const act = Object.keys(data.skills).filter(k=>data.skills[k]).join(", ");
  document.getElementById("activeSkills").innerText = act || "없음";
}

/* ---------------------------------------------------------------
   3. 퀘스트
--------------------------------------------------------------- */
function openQuestModal(){ document.getElementById("questModal").style.display="flex"; }
function closeQuestModal(){ document.getElementById("questModal").style.display="none"; }

function addQuest(){
  const name = document.getElementById("qName").value.trim();
  const diff = Number(document.getElementById("qDiff").value);
  if(!name) return;

  data.quests.push({id:Date.now(),name,diff});
  save();
  closeQuestModal();
  renderQuest();
}

function renderQuest(){
  const box = document.getElementById("questList");
  box.innerHTML = "";
  data.quests.forEach(q=>{
    const div = document.createElement("div");
    div.className="card";
    div.innerHTML = `
      <b>${q.name}</b> — ★${q.diff}<br>
      <button onclick="finishQuest(${q.id})">완료</button>
    `;
    box.appendChild(div);
  });
}

function finishQuest(id){
  const q = data.quests.find(x=>x.id===id);
  if(!q) return;

  let coin = [0,5,12,20][q.diff];
  let exp  = [0,10,25,40][q.diff];

  if(data.skills.reward2){ coin*=2; exp*=2; }
  if(data.skills.exp20){ exp = Math.floor(exp*1.2); }

  data.coins += coin;
  data.exp += exp;

  // 레벨업
  while(data.exp >= data.expNeed){
    data.exp -= data.expNeed;
    data.lv++;
    data.expNeed = Math.floor(data.expNeed*1.3);
  }

  data.quests = data.quests.filter(x=>x.id!==id);
  save();
  renderQuest();
}

/* ---------------------------------------------------------------
   4. 상점
--------------------------------------------------------------- */
function buyItem(name, price){
  if(data.coins < price) return alert("코인이 부족합니다.");
  data.coins -= price;
  save();
  alert("구매 완료!");
  renderDashboard();
}

/* ---------------------------------------------------------------
   5. 뽑기
--------------------------------------------------------------- */
function rollGacha(){
  if(data.coins < 20) return alert("코인이 부족합니다.");
  data.coins -= 20;

  const base = [
    ["C",40],["UC",25],["R",15],["SR",10],["SSR",5],["V",3],["VIP",2]
  ];
  let r = Math.random()*100;

  // 운 2배 스킬 → SSR 이상 확률 증가
  if(data.skills.luck2){
    base[4][1]*=2; // SSR
    base[5][1]*=2; // V
    base[6][1]*=2; // VIP
  }

  let grade="C";
  for(let [g,p] of base){
    if(r < p){ grade=g; break; }
    r -= p;
  }

  // 옵션 생성
  const ops = ["공격력 +10","경험치 +10%","코인 +10%"];
  const option = ops[Math.floor(Math.random()*ops.length)];

  const item = {id:Date.now(),grade,option};
  data.inventory.push(item);
  save();

  document.getElementById("gachaResult").innerHTML =
    `<b>${grade}</b> 등급 장비 획득!<br>${option}`;
}

/* ---------------------------------------------------------------
   6. 스킬
--------------------------------------------------------------- */
function renderSkills(){
  document.getElementById("sk_reward").checked = data.skills.reward2;
  document.getElementById("sk_luck").checked = data.skills.luck2;
  document.getElementById("sk_exp").checked = data.skills.exp20;
}

function toggleSkill(name){
  if(name==="reward2") data.skills.reward2 = !data.skills.reward2;
  if(name==="luck2") data.skills.luck2 = !data.skills.luck2;
  if(name==="exp20") data.skills.exp20 = !data.skills.exp20;
  save();
}

/* ---------------------------------------------------------------
   7. 인벤토리
--------------------------------------------------------------- */
function renderInventory(){
  const box = document.getElementById("invList");
  box.innerHTML = "";
  
  data.inventory.forEach(i=>{
    const div = document.createElement("div");
    div.className="inv-item";
    div.innerHTML = `
      <b>${i.grade}</b> — ${i.option}<br>
      ${data.equip===i.id ? "<button onclick='unequip()'>해제</button>"
      : `<button onclick='equip(${i.id})'>착용</button>`}
    `;
    box.appendChild(div);
  });
}

function equip(id){
  data.equip = id;
  save();
  renderInventory();
}

function unequip(){
  data.equip = "";
  save();
  renderInventory();
}

/* ---------------------------------------------------------------
   8. 데이터 초기화
--------------------------------------------------------------- */
function resetData(){
  if(!confirm("현재 사용자 데이터를 모두 삭제합니다.")) return;
  localStorage.removeItem(KEY(user));
  location.reload();
}
</script>

</body>
</html>
